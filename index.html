<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Discover Your Spiritual Gift – 28 Gifts</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
        input[type=number] { -moz-appearance: textfield; }
    </style>
</head>
<body class="bg-gradient-to-b from-blue-50 to-indigo-100 min-h-screen font-sans">
<div class="max-w-2xl mx-auto p-6">
    <div class="bg-white rounded-3xl shadow-2xl overflow-hidden">
        <div class="bg-gradient-to-r from-indigo-600 to-blue-700 p-8 text-white text-center">
            <h1 class="text-4xl md:text-5xl font-bold mb-2">Discover Your Spiritual Gift</h1>
            <p class="text-indigo-100 text-lg">28 Biblical Gifts • 140 Questions</p>
            <p class="text-sm mt-4 opacity-90" id="user-id-display">Offline mode • Local only</p>
        </div>

        <!-- Assessment -->
        <div id="assessment-view" class="p-8 space-y-10">
            <div class="text-center">
                <div class="text-6xl font-bold text-indigo-600 mb-4" id="current-question-num">1</div>
                <p class="text-gray-600 text-lg">of 140 questions</p>
            </div>
            <div id="question-text" class="bg-blue-50 rounded-2xl p-8 text-xl text-gray-800 leading-relaxed border-2 border-blue-200">
                Loading your first question...
            </div>
            <form id="score-form" class="space-y-8">
                <div class="flex justify-center">
                    <input type="number" id="score-input" min="0" max="5"
                           class="w-56 h-56 text-9xl font-extrabold text-center rounded-3xl border-4 border-indigo-400 focus:border-indigo-600 outline-none shadow-2xl bg-white md:w-72 md:h-72 md:text-[12rem]"
                           placeholder="?" autocomplete="off">
                </div>
                <div class="grid grid-cols-2 gap-4 text-sm text-gray-600">
                    <div class="text-left">0 = Never</div>
                    <div class="text-right">5 = Always</div>
                    <div class="text-left col-span-2 text-center text-gray-500">1 = Rarely • 2 = Sometimes • 3 = Often • 4 = Very Often</div>
                </div>
                <button type="submit" class="w-full bg-gradient-to-r from-indigo-600 to-blue-600 hover:from-indigo-700 hover:to-blue-700 text-white font-bold text-2xl py-6 rounded-2xl shadow-xl transition transform hover:scale-105">
                    Next Question →
                </button>
            </form>
            <div class="mt-8">
                <div class="text-right text-gray-600 font-medium mb-2" id="progress-text">0%</div>
                <div class="w-full bg-gray-300 rounded-full h-6 overflow-hidden shadow-inner">
                    <div id="progress-bar" class="bg-gradient-to-r from-indigo-500 to-blue-500 h-full transition-all duration-500" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <!-- Results -->
        <div id="results-view" class="hidden p-8 space-y-10">
            <h2 class="text-5xl font-bold text-center text-green-600 mb-8">Your Top Spiritual Gifts</h2>
            <div id="top-gift-display" class="bg-gradient-to-br from-green-50 to-emerald-100 rounded-3xl p-10 border-4 border-green-400 shadow-2xl"></div>
            <div class="space-y-6" id="top-gifts-list"></div>
            <button onclick="location.reload()" class="w-full bg-red-600 hover:bg-red-700 text-white font-bold text-xl py-6 rounded-2xl shadow-xl">
                Take Assessment Again
            </button>
        </div>
    </div>
</div>

<script>
// =============================
// 28 GIFTS + BIBLICAL REFERENCES
// =============================
const GIFTS = [
    "Administration","Apostleship","Craftsmanship","Creative Communication","Discernment of Spirits",
    "Encouragement","Evangelism","Faith","Giving","Healing","Helps/Service","Hospitality","Intercession",
    "Interpretation of Tongues","Knowledge","Leadership","Mercy","Miracles","Music/Worship","Pastoral Care",
    "Prophecy","Service","Shepherding","Teaching","Tongues","Wisdom","Witnessing","Writing"
];

const TOTAL_QUESTIONS = 140; // 28 gifts × 5 questions each

// 140

// 5 questions per gift (140 total) – carefully written to match Bryant-style wording
const BASE_QUESTIONS = [
    // 1. Administration
    "I excel at organizing people and resources to accomplish God’s goals","I naturally see what needs to be done and create systems","People trust me to manage projects well","I bring order out of chaos in ministry settings","Deadlines and details energize rather than drain me",
    // 2. Apostleship
    "I feel called to plant new churches or ministries","I thrive in pioneering situations","I am drawn to unreached people groups","I adapt easily to new cultures","I pioneer new ways of doing ministry",
    // 3. Craftsmanship
    "I love using my hands to create things that glorify God","My artistic or technical skills have blessed the church","I enjoy building, designing, or repairing for ministry","People are amazed at what I can make for God’s house","I sense God’s pleasure when I create excellently",
    // 4. Creative Communication
    "I communicate truth through drama, art, writing, or media","I can take deep theology and make it beautiful and clear","My creative work moves people toward God","I feel the Spirit when I write, design, or perform","Others say my creativity helps them see Jesus",
    // 5. Discernment of Spirits
    "I quickly sense when something is spiritually off","I can distinguish truth from error in teaching","I feel physical or emotional reactions to demonic presence","People ask me to pray with me because I “see” clearly","God has used me to expose deception",
    // 6. Encouragement
    "People say my words build them up","I see potential in others and call it out","I love helping discouraged believers press on","My presence brings hope in hard times","I write notes or texts that strengthen others’ faith",
    // 7. Evangelism
    "Unbelievers open up to me easily","I regularly lead people to Christ","I feel burdened for the lost","Sharing the gospel feels natural and joyful","People say I explain salvation clearly",
    // 8. Faith
    "I pray expecting miracles","I trust God in impossible situations","Others are strengthened by my faith","I step out when God speaks, even if it looks crazy","God has answered dramatic prayers through me",
    // 9. Giving
    "I give generously and cheerfully","I look for needs I can meet","I live simply so I can give more","God miraculously provides so I can bless others","I give anonymously when possible",
    // 10. Healing
    "People are healed when I pray for them","I feel compassion surge when I pray for the sick","I regularly pray for physical or emotional healing","God has used me as a channel of healing","I believe God still heals today",
    // 11. Helps/Service
    "I love practical, behind-the-scenes work","I notice needs others miss","Serving without recognition brings me joy","I free leaders by handling details","I serve gladly even in unglamorous tasks",
    // 12. Hospitality
    "My home is open to anyone","I make strangers feel like family","Hosting events or guests energizes me","People relax and open up in my home","I love feeding and housing God’s people",
    // 13. Intercession
    "I pray for hours with passion and persistence","I wake up at night burdened to pray","People ask me to pray because answers follow","I carry prayer lists and see breakthroughs","I feel spiritual warfare when I intercede",
    // 14. Interpretation of Tongues
    "When someone speaks in tongues, I often know the meaning","I have interpreted messages in tongues in meetings","God gives me understanding of unknown languages","The church is edified when I interpret","I desire this gift to build the Body",
    // 15. Knowledge (Word of)
    "God reveals facts I could not know naturally","I receive supernatural insight into situations","God shows me hidden things in prayer","My knowledge gifts help solve problems","People are amazed at what God shows me",
    // 16. Leadership
    "People naturally follow my direction","I cast vision that others buy into","I guide groups toward God’s purposes","I delegate well and empower others","Teams accomplish more under my leadership",
    // 17. Mercy
    "My heart breaks for the suffering","I visit hospitals, prisons, nursing homes","I forgive easily and completely","I weep with those who weep","People feel Jesus’ love through my presence",
    // 18. Miracles
    "God has done undeniable miracles through my prayers","Nature obeys when I command in Jesus’ name","I expect the supernatural","People are healed or delivered when I pray with authority","I have seen creative miracles",
    // 19. Music/Worship
    "Leading worship ushers in God’s presence","My music moves people to tears or repentance","I write songs or play instruments for God","Worship leading is my primary calling","The atmosphere shifts when I worship",
    // 20. Pastoral Care
    "I nurture spiritual babies into maturity","People trust me with deep wounds","I disciple one-on-one or in small groups","I restore those who have fallen","I carry people’s burdens to Jesus",
    // 21. Prophecy
    "God speaks timely words through me","My words bring conviction or encouragement","I sense what God is saying to the church now","Prophecy through me builds up the Body","I speak forth God’s heart accurately",
    // 22. Service (same as Helps – kept for compatibility)
    "I serve joyfully wherever needed","Practical help is my love language","I free others for ministry by serving","I see serving as worship","My service blesses leaders",
    // 23. Shepherding
    "I protect and guide God’s flock","I know when sheep are hurting","I restore straying believers","Small group ministry is my heartbeat","I have a pastor’s heart for people",
    // 24. Teaching
    "I make Scripture clear and applicable","People grow under my teaching","I study deeply to teach accurately","I love preparing lessons","Truth through me transforms lives",
    // 25. Tongues
    "I pray or sing in tongues regularly","Tongues is my prayer language","God gives me messages in tongues","I desire tongues for edification","Tongues strengthens my spirit",
    // 26. Wisdom (Word of)
    "God gives me supernatural solutions","I know what to do in crises","My counsel brings breakthrough","People seek me for godly advice","God’s wisdom flows through me",
    // 27. Witnessing / Testimony
    "My story opens doors for the gospel","People are drawn to Jesus through my testimony","I naturally share what God has done","My life witnesses even without words","Unbelievers listen when I speak",
    // 28. Writing
    "God speaks through my writing","My blogs, books, or letters impact lives","I clarify truth through written word","Writing is my primary ministry tool","People grow through what I write"
];

// Perfectly shuffled order (5 blocks × 28 gifts)
const shuffledIndices = [];
for (let block = 0; block < 5; block++) {
    for (let gift = 0; gift < 28; gift++) {
        shuffledIndices.push(gift * 5 + block);
    }
}
const QUESTIONS = shuffledIndices.map(i => BASE_QUESTIONS[i]);

// Gift details with Scripture (for results screen)
const GIFT_DETAILS = {
    "Administration": { ref: "1 Cor 12:28; Rom 12:8; Acts 6:1-7" },
    "Apostleship": { ref: "Eph 4:11; 1 Cor 12:28" },
    "Craftsmanship": { ref: "Exodus 31:1-6; 35:30-35" },
    "Creative Communication": { ref: "Psalm 45:1; Exodus 35:30-35" },
    "Discernment of Spirits": { ref: "1 Cor 12:10; 1 John 4:1" },
    "Encouragement": { ref: "Romans 12:8; Acts 14:22" },
    "Barnabas" example },
    "Evangelism": { ref: "Ephesians 4:11; Acts 8:4" },
    "Faith": { ref: "1 Corinthians 12:9" },
    "Giving": { ref: "Romans 12:8; 2 Cor 8-9" },
    "Healing": { ref: "1 Cor 12:9,28; James 5:14-15" },
    "Helps/Service": { ref: "1 Cor 12:28; Rom 16:1-2" },
    "Hospitality": { ref: "1 Peter 4:9-10; Romans 12:13" },
    "Intercession": { ref: "Colossians 4:12; 1 Timothy 2:1" },
    "Interpretation of Tongues": { ref: "1 Corinthians 12:10; 14:30" },
    "Knowledge": { ref: "1 Corinthians 12:8" },
    "Leadership": { ref: "Romans 12:8; 1 Timothy 3" },
    "Mercy": { ref: "Romans 12:8; Luke 10:33-37" },
    "Miracles": { ref: "1 Corinthians 12:10,28" },
    "Music/Worship": { ref: "1 Chronicles 25; Psalm 150" },
    "Pastoral Care": { ref: "Ephesians 4:11; 1 Peter 5:1-4" },
    "Prophecy": { ref: "Romans 12:6; 1 Cor 14:3" },
    "Service": { ref: "Same as Helps – Rom 12:7" },
    "Shepherding": { ref: "Ephesians 4:11; John 10" },
    "Teaching": { ref: "Romans 12:7; Ephesians 4:11" },
    "Tongues": { ref: "1 Corinthians 12:10; 14" },
    "Wisdom": { ref: "1 Corinthians 12:8; James 3:17" },
    "Witnessing": { ref: "Acts 1:8; 1 Peter 3:15" },
    "Writing": { ref: "Habakkuk 2:2; Psalm 45:1" }
};

let currentAnswers = new Array(TOTAL_QUESTIONS + 1).fill(null);
let currentQuestion = 1;

const el = {
    questionNum: document.getElementById('current-question-num'),
    questionText: document.getElementById('question-text'),
    scoreInput: document.getElementById('score-input'),
    progressText: document.getElementById('progress-text'),
    progressBar: document.getElementById('progress-bar'),
    assessmentView: document.getElementById('assessment-view'),
    resultsView: document.getElementById('results-view'),
    topGiftDisplay: document.getElementById('top-gift-display'),
    topGiftsList: document.getElementById('top-gifts-list')
};

const updateUI = () => {
    const answered = currentAnswers.filter(a => a !== null).length;
    if (answered === TOTAL_QUESTIONS) { renderResults(); return; }
    while (currentQuestion <= TOTAL_QUESTIONS && currentAnswers[currentQuestion] !== null) currentQuestion++;
    el.questionNum.textContent = currentQuestion;
    el.questionText.innerHTML = QUESTIONS[currentQuestion - 1];
    el.scoreInput.value = '';
    el.scoreInput.focus();
    const pct = Math.round((answered / TOTAL_QUESTIONS) * 100);
    el.progressText.textContent = `${pct}% Complete`;
    el.progressBar.style.width = `${pct}%`;
};

document.getElementById('score-form').addEventListener('submit', e => {
    e.preventDefault();
    const score = parseInt(el.scoreInput.value);
    if (score >= 0 && score <= 5) {
        currentAnswers[currentQuestion] = score;
        currentQuestion++;
        updateUI();
    }
});

const calculateResults = () => {
    const scores = GIFTS.map(() => 0);
    for (let i = 0; i < TOTAL_QUESTIONS; i++) {
        const answer = currentAnswers[i + 1];
        if (answer !== null) {
            const giftIndex = Math.floor(shuffledIndices[i] / 5);
            scores[giftIndex] += answer;
        }
    }
    return GIFTS.map((gift, i) => ({ gift, score: scores[i], max: 25, ref: GIFT_DETAILS[gift].ref }))
                .sort((a, b) => b.score - a.score);
};

const renderResults = () => {
    const results = calculateResults();
    el.assessmentView.classList.add('hidden');
    el.resultsView.classList.remove('hidden');

    const top = results[0];
    el.topGiftDisplay.innerHTML = `
        <div class="text-center">
            <h2 class="text-6xl font-bold text-green-600 mb-4">${top.gift}</h2>
            <p class="text-3xl font-bold text-gray-800 mb-6">Your Strongest Gift</p>
            <p class="text-2xl text-gray-700 mb-4">Score: ${top.score} / 25</p>
            <p class="text-lg italic text-gray-600">Biblical reference: ${top.ref}</p>
        </div>`;

    el.topGiftsList.innerHTML = results.slice(0, 7).map((g, i) => `
        <div class="bg-white rounded-2xl p-6 shadow-lg border-2 ${i===0 ? 'border-yellow-500' : 'border-gray-300'}">
            <div class="flex justify-between items-center">
                <div class="text-4xl font-bold text-indigo-700">#${i+1}</div>
                <div class="text-right">
                    <div class="text-2xl font-bold">${g.gift}</div>
                    <div class="text-sm text-gray-600">${g.score}/25 – ${g.ref}</div>
                </div>
            </div>
        </div>
    `).join('');
};

updateUI(); // Start the assessment
</script>
</body>
</html>
